# docker-compose.yml
version: '3.8'

services:
  # --- PostgreSQL Database ---
  # This is where we store campaigns and message records.
  # Think of it as your "persistent memory."
  postgres:
    image: postgres:16-alpine    # Use the official Postgres image (alpine = smaller size)
    container_name: notif-postgres
    environment:
      POSTGRES_USER: dev_user          # The username to connect with
      POSTGRES_PASSWORD: dev_password  # The password (fine for local dev)
      POSTGRES_DB: notifications       # The database name to create automatically
    ports:
      - "5432:5432"   # Maps port 5432 on YOUR machine to port 5432 inside the container
    volumes:
      - postgres_data:/var/lib/postgresql/data  # Persist data even if container restarts

  # --- Redis ---
  # This will be our Message Queue broker (used in Week 2).
  # For now, we just want it running and ready.
  redis:
    image: redis:7-alpine
    container_name: notif-redis
    ports:
      - "6379:6379"   # Default Redis port
    volumes:
      - redis_data:/var/lib/redis/data

# Named volumes â€” Docker manages where this data lives on your disk.
# You don't need to worry about the path.
volumes:
  postgres_data:
  redis_data:
